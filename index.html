<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SSelix ‚Äì Advanced Shopping</title>
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  
  <style>
    /* --- General Styling (SSelix Advanced Design) --- */
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    body { background: #f4f6fa; color: #1e2b3c; line-height: 1.6; }

    /* Sticky Glassmorphism Header */
    header {
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
      padding: 1rem 2rem; position: sticky; top: 0; z-index: 100;
      box-shadow: 0 4px 25px rgba(0, 0, 0, 0.03); border-bottom: 1px solid rgba(0,0,0,0.05);
      display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 1rem;
    }

    .logo {
      font-weight: 800; font-size: 1.8rem; letter-spacing: -0.03em;
      background: linear-gradient(135deg, #0b3b2c, #1b6b4f);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      display: flex; align-items: center; gap: 10px; cursor: pointer;
    }
    .logo i { background: linear-gradient(135deg, #0b3b2c, #1b6b4f); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-size: 2rem; }

    .search-wrapper { flex: 1; max-width: 450px; position: relative; }
    .search-wrapper i { position: absolute; left: 18px; top: 50%; transform: translateY(-50%); color: #7c8896; font-size: 1.1rem; pointer-events: none; }
    .search-box {
      width: 100%; padding: 1rem 1rem 1rem 3.5rem; border: 1px solid #e2e8f0; border-radius: 60px;
      font-size: 1rem; background: white; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 12px rgba(0,0,0,0.02);
    }
    .search-box:focus { outline: none; border-color: #1b6b4f; box-shadow: 0 8px 24px rgba(27,107,79,0.12); transform: translateY(-2px); }

    /* Product Grid */
    .products {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 2rem; padding: 2.5rem; max-width: 1400px; margin: 0 auto;
    }

    /* Card ‚Äì Modern Neumorphism / Soft Shadow */
    .card {
      background: white; border-radius: 24px; padding: 1.5rem;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.04), 0 5px 15px rgba(0, 0, 0, 0.02);
      transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.3s ease;
      display: flex; flex-direction: column; border: 1px solid rgba(255,255,255,0.8);
      position: relative; overflow: hidden;
    }
    .card:hover { transform: translateY(-8px) scale(1.02); box-shadow: 0 25px 50px -12px rgba(0,40,20,0.15); z-index: 2; }

    .card img {
      width: 100%; height: 220px; object-fit: cover; border-radius: 18px;
      background: #f8fafc; margin-bottom: 1.2rem; border: 1px solid #f1f5f9;
    }

    .card h4 { font-size: 1.35rem; font-weight: 700; margin-bottom: 0.4rem; color: #1a2b3e; letter-spacing: -0.02em; }
    .card p { color: #64748b; font-size: 0.95rem; margin-bottom: 0.8rem; line-height: 1.5; flex-grow: 1; }
    .price { font-weight: 800; font-size: 1.5rem; color: #0b3b2c; margin: 0.5rem 0 1rem; letter-spacing: -0.03em; }

    /* Quantity Selector ‚Äì Sleek Pill Shape */
    .qty {
      display: flex; justify-content: space-between; align-items: center;
      background: #f8fafc; border-radius: 50px; padding: 6px; margin-top: auto;
      border: 1px solid #e2e8f0;
    }
    .qty button {
      width: 42px; height: 42px; border: none; background: white; color: #1e2b3c;
      font-size: 1.4rem; font-weight: 600; border-radius: 50%; cursor: pointer;
      transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      display: flex; align-items: center; justify-content: center;
    }
    .qty button:hover { background: #0b3b2c; color: white; transform: scale(1.1); box-shadow: 0 6px 15px rgba(11, 59, 44, 0.3); }
    .qty span { font-weight: 700; font-size: 1.2rem; min-width: 40px; text-align: center; color: #334155; }

    /* Floating Cart Button ‚Äì Premium Gradient */
    .cart-float {
      position: fixed; bottom: 30px; right: 30px;
      background: linear-gradient(135deg, #0b3b2c, #16a34a);
      color: white; width: 75px; height: 75px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 2rem; box-shadow: 0 15px 35px -5px rgba(11, 59, 44, 0.5);
      cursor: pointer; transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      border: 4px solid rgba(255,255,255,0.2); z-index: 99;
    }
    .cart-float:hover { transform: scale(1.1) rotate(-5deg); box-shadow: 0 20px 45px -5px rgba(11, 59, 44, 0.6); }
    .cart-badge {
      position: absolute; top: 0; right: 0; background: #ef4444; color: white;
      width: 28px; height: 28px; font-size: 13px; font-weight: bold; border-radius: 50%;
      display: flex; align-items: center; justify-content: center; border: 2px solid white;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2); transform: translate(5px, -5px); opacity: 0; transition: 0.3s;
    }

    /* Popup Modal ‚Äì Elegant & Frosted */
    .popup-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(8px);
      display: none; justify-content: center; align-items: center; z-index: 200;
      opacity: 0; transition: opacity 0.3s ease;
    }
    .popup-overlay.active { opacity: 1; }
    
    .popup-box {
      background: white; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto;
      padding: 2.5rem; border-radius: 32px; box-shadow: 0 50px 100px -20px rgba(0, 0, 0, 0.25);
      animation: popUpAnim 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); position: relative;
    }
    @keyframes popUpAnim { from { transform: scale(0.9) translateY(20px); opacity: 0; } to { transform: scale(1) translateY(0); opacity: 1; } }

    .popup-box h3 { font-size: 1.8rem; font-weight: 800; margin-bottom: 1.5rem; color: #0f172a; text-align: center; letter-spacing: -0.03em; }

    .input-group { margin-bottom: 1.2rem; }
    .input-group label { display: block; margin-bottom: 0.5rem; font-weight: 600; color: #64748b; font-size: 0.9rem; margin-left: 10px; }
    
    .popup-box input, .popup-box select, .popup-box textarea {
      width: 100%; padding: 1.1rem 1.4rem; border: 2px solid #f1f5f9; border-radius: 20px;
      font-size: 1rem; background: #f8fafc; transition: 0.2s ease; outline: none;
      color: #334155; font-weight: 500;
    }
    .popup-box textarea { resize: vertical; min-height: 100px; line-height: 1.5; }
    .popup-box input:focus, .popup-box select:focus, .popup-box textarea:focus {
      border-color: #0b3b2c; background: white; box-shadow: 0 0 0 4px rgba(11, 59, 44, 0.1);
    }

    .total-row {
      background: #ecfdf5; border-radius: 20px; padding: 1.5rem; margin: 2rem 0;
      display: flex; justify-content: space-between; align-items: center;
      border: 1px solid #d1fae5; color: #065f46;
    }
    .total-row span:first-child { font-size: 1.1rem; font-weight: 600; }
    .total-row span:last-child { font-size: 1.8rem; font-weight: 800; }

    .btn-checkout {
      width: 100%; padding: 1.2rem; border: none; border-radius: 20px;
      font-size: 1.1rem; font-weight: 700; cursor: pointer; display: flex;
      align-items: center; justify-content: center; gap: 12px; color: white;
      transition: all 0.3s; margin-bottom: 1rem; position: relative; overflow: hidden;
    }
    .btn-wa { background: linear-gradient(135deg, #25D366, #16a34a); box-shadow: 0 10px 25px -5px rgba(37, 211, 102, 0.4); }
    .btn-wa:hover { transform: translateY(-3px); box-shadow: 0 15px 35px -5px rgba(37, 211, 102, 0.5); }
    
    .btn-email { background: linear-gradient(135deg, #3b82f6, #2563eb); box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.4); }
    .btn-email:hover { transform: translateY(-3px); box-shadow: 0 15px 35px -5px rgba(59, 130, 246, 0.5); }

    .btn-cancel {
      background: transparent; color: #94a3b8; width: 100%; padding: 1rem; border: none;
      font-weight: 600; cursor: pointer; transition: 0.2s; border-radius: 15px;
    }
    .btn-cancel:hover { background: #f1f5f9; color: #64748b; }

    /* Footer */
    footer { text-align: center; padding: 3rem 1rem; color: #94a3b8; font-size: 0.9rem; margin-top: 2rem; }
  </style>
</head>
<body>

<header>
  <div class="logo"><i class="fas fa-layer-group"></i> SSelix</div>
  <div class="search-wrapper">
    <i class="fas fa-search"></i>
    <input type="text" id="searchInput" class="search-box" placeholder="Search products...">
  </div>
</header>

<div class="products" id="productContainer">
  </div>

<div class="cart-float" onclick="openCart()">
  <i class="fas fa-shopping-bag"></i>
  <span id="cartBadge" class="cart-badge">0</span>
</div>

<div class="popup-overlay" id="popup">
  <div class="popup-box">
    <h3>Complete Order</h3>
    
    <div class="input-group">
      <label>Full Name</label>
      <input type="text" id="name" placeholder="John Doe">
    </div>
    
    <div class="input-group">
      <label>Phone / WhatsApp</label>
      <input type="tel" id="phone" placeholder="0300 1234567">
    </div>
    
    <div class="input-group">
      <label>Delivery Area (Calculates Cost)</label>
      <select id="delivery">
        <option value="pickup">Pickup (Free) ‚Äî üìç Main Branch</option>
        <option value="peshawar">Peshawar City ‚Äî Rs 150</option>
        <option value="kpk">KPK (Other Cities) ‚Äî Rs 250</option>
        <option value="other">Other Province ‚Äî Rs 400</option>
      </select>
    </div>

    <div class="input-group">
      <label>Complete Address for Rider</label>
      <textarea id="fullAddress" placeholder="Enter House #, Street #, Colony name, Nearby landmark..."></textarea>
    </div>

    <div class="total-row">
      <span>Total Amount</span>
      <span id="totalAmount">Rs 0</span>
    </div>

    <button class="btn-checkout btn-wa" onclick="sendOrder('whatsapp')">
      <i class="fab fa-whatsapp"></i> Confirm via WhatsApp
    </button>

    <button class="btn-checkout btn-email" onclick="sendOrder('email')">
      <i class="fas fa-envelope"></i> Confirm via Email
    </button>

    <button class="btn-cancel" onclick="closeCart()">Cancel & Continue Shopping</button>
  </div>
</div>

<footer>
  <p>¬© 2024 SSelix Stores ‚Ä¢ Fast Delivery & Premium Quality</p>
</footer>

<script>
  /* ======================================================
     SETTINGS (Updated)
  ====================================================== */
  const WHATSAPP_NUMBER = "923102890002"; 
  const MERCHANT_EMAIL = "sselix418@gmail.com"; 
  const PICKUP_LOCATION = "Main Branch, SSelix Center";

  /* ======================================================
     PRODUCT DATA
  ====================================================== */
  const PRODUCTS = [
    {
      id: 1,
      title: "Apple Juice",
      description: "100% Organic, fresh pressed juice (1 Liter)",
      price: 250,
      image: "https://via.placeholder.com/400?text=Apple+Juice"
    },
    {
      id: 2,
      title: "Basmati Rice",
      description: "Premium Super Kernel Basmati (1kg Pack)",
      price: 350,
      image: "https://via.placeholder.com/400?text=Basmati+Rice"
    },
    {
      id: 3,
      title: "Cooking Oil",
      description: "Cholesterol free healthy oil (1 Liter Pouch)",
      price: 500,
      image: "https://via.placeholder.com/400?text=Cooking+Oil"
    },
    {
      id: 4,
      title: "Detergent Pack",
      description: "High power stain remover (500g)",
      price: 150,
      image: "https://via.placeholder.com/400?text=Detergent"
    },
    {
      id: 5,
      title: "Green Tea",
      description: "Authentic Peshawar Green Tea (200g)",
      price: 120,
      image: "https://via.placeholder.com/400?text=Green+Tea"
    },
    {
      id: 6,
      title: "Mixed Nuts",
      description: "Roasted almonds, walnuts & cashews (250g)",
      price: 850,
      image: "https://via.placeholder.com/400?text=Dry+Fruits"
    }
  ];

  /* ======================================================
     APP LOGIC
  ====================================================== */
  const DELIVERY_CHARGES = { pickup: 0, peshawar: 150, kpk: 250, other: 400 };
  let cart = {}; 

  // --- Display Products ---
  function renderProducts(list) {
    const container = document.getElementById("productContainer");
    container.innerHTML = "";
    
    if(list.length === 0) {
      container.innerHTML = `<div style="grid-column:1/-1; text-align:center; padding:3rem; color:#94a3b8;"><h4>No products found</h4></div>`;
      return;
    }

    list.forEach(p => {
      const qty = cart[p.id] || 0;
      container.innerHTML += `
      <div class="card">
        <img src="${p.image}" alt="${p.title}" loading="lazy">
        <h4>${p.title}</h4>
        <p>${p.description}</p>
        <div class="price">Rs ${p.price}</div>
        
        <div class="qty">
          <button onclick="updateQty(${p.id}, -1)">-</button>
          <span id="qty-${p.id}">${qty}</span>
          <button onclick="updateQty(${p.id}, 1)">+</button>
        </div>
      </div>
      `;
    });
  }

  // --- Cart Management ---
  window.updateQty = (id, change) => {
    if(!cart[id]) cart[id] = 0;
    cart[id] += change;
    if(cart[id] < 0) cart[id] = 0;
    
    // Update UI
    document.getElementById(`qty-${id}`).innerText = cart[id];
    updateCartIcon();
  };

  function updateCartIcon() {
    let totalItems = Object.values(cart).reduce((a, b) => a + b, 0);
    const badge = document.getElementById("cartBadge");
    badge.innerText = totalItems;
    badge.style.opacity = totalItems > 0 ? "1" : "0";
    
    // Also update popup if open
    if(document.getElementById("popup").style.display === "flex") calculateTotal();
  }

  // --- Search Function ---
  document.getElementById("searchInput").addEventListener("input", (e) => {
    const term = e.target.value.toLowerCase();
    const filtered = PRODUCTS.filter(p => 
      p.title.toLowerCase().includes(term) || 
      p.description.toLowerCase().includes(term)
    );
    renderProducts(filtered);
  });

  // --- Popup Logic ---
  function calculateTotal() {
    let subtotal = PRODUCTS.reduce((sum, p) => sum + (p.price * (cart[p.id] || 0)), 0);
    let deliveryMethod = document.getElementById("delivery").value;
    let deliveryFee = DELIVERY_CHARGES[deliveryMethod];
    
    document.getElementById("totalAmount").innerText = `Rs ${subtotal + deliveryFee}`;
    return { subtotal, deliveryFee, total: subtotal + deliveryFee, deliveryMethod };
  }

  document.getElementById("delivery").addEventListener("change", calculateTotal);

  window.openCart = () => {
    let totalItems = Object.values(cart).reduce((a, b) => a + b, 0);
    if(totalItems === 0) return alert("Your cart is empty! Add some products first.");
    
    calculateTotal();
    const overlay = document.getElementById("popup");
    overlay.style.display = "flex";
    setTimeout(() => overlay.classList.add("active"), 10); // for animation
  };

  window.closeCart = () => {
    const overlay = document.getElementById("popup");
    overlay.classList.remove("active");
    setTimeout(() => overlay.style.display = "none", 300);
  };

  // --- Send Order Logic ---
  window.sendOrder = (method) => {
    const name = document.getElementById("name").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const fullAddress = document.getElementById("fullAddress").value.trim(); // MANUAL ADDRESS
    
    if(!name || !phone) return alert("Please fill in Name and Phone Number.");
    
    // Check if delivery method is NOT pickup, address is mandatory
    const deliveryMethod = document.getElementById("delivery").value;
    if(deliveryMethod !== 'pickup' && !fullAddress) {
      return alert("Please enter the Full Address for delivery (House #, Street, etc).");
    }

    let cartItems = PRODUCTS.filter(p => cart[p.id] > 0);
    if(cartItems.length === 0) return alert("Cart is empty.");

    // Build Message
    const calc = calculateTotal();
    const deliveryText = document.getElementById("delivery").options[document.getElementById("delivery").selectedIndex].text;
    
    let itemsList = cartItems.map(p => `‚Ä¢ ${p.title} x ${cart[p.id]} (Rs ${p.price * cart[p.id]})`).join('\n');

    let message = `üõí *NEW ORDER - SSelix*\n\n` +
                  `üë§ *Name:* ${name}\n` +
                  `üìû *Phone:* ${phone}\n\n` +
                  `üì¶ *Order Summary:*\n${itemsList}\n` +
                  `------------------------\n` +
                  `üíµ Subtotal: Rs ${calc.subtotal}\n` +
                  `üöö Delivery: ${deliveryText}\n` +
                  `üí∞ *GRAND TOTAL: Rs ${calc.total}*\n` +
                  `------------------------\n`;
                  
    if(deliveryMethod === 'pickup') {
      message += `üìç *Type:* Self Pickup\n`;
    } else {
      message += `üè† *Delivery Address:*\n${fullAddress}\n`;
    }

    // Send
    if(method === 'whatsapp') {
      window.open(`https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`, '_blank');
    } else if(method === 'email') {
      let subject = `New Order from ${name} - SSelix`;
      let body = message.replace(/\n/g, "%0D%0A");
      window.location.href = `mailto:${MERCHANT_EMAIL}?subject=${encodeURIComponent(subject)}&body=${body}`;
    }
  };

  // Init
  renderProducts(PRODUCTS);

</script>
</body>
</html>
